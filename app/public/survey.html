<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FriendFinder Survey</title>

	<!-- Materialize Glyphs Stylesheet -->
	<link  rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

	<!-- Materialize Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

	<style type="text/css">
		html {
			background: url('http://wallpaperpulse.com/thumb/2861248.jpg') no-repeat center center fixed;
				-webkit-background-size: cover;
  			-moz-background-size: cover;
  			-o-background-size: cover;
  		background-size: cover;
		}
		h1 {
			font-weight: 600;
		}
		h5, h6 {
			color: white;
		}
	</style>

</head>
<body>

	<!-- This page will hold survey elements then POST user inputs -->
	<div class="container">
		<div class="row">
			<div class="col s12">

				<h1 class="center-align red-text text-darken-1">Survey Questions</h1>
			
				<div class="divider"></div>
				<div class="section">
					<h5>About You</h5>

					<!-- Form with questions -->
					<div class="form">
					
					<div class="row">
						<div class="col s12"> <!-- This column div needs to hold the ENTIRE form -->
							
							<!-- Name and picture inputs -->
							<div class="row">
								<div class="input-field col s6">
          				<input placeholder="" id="name" type="text" class="validate lime-text text-accent-2">
          				<label for="name" class="green-text text-accent-3">Your Name (Required)</label>
        				</div>
        				<div class="input-field col s6">
          				<input placeholder="" id="photo" type="text" class="validate lime-text text-accent-2">
          				<label for="photo" class="green-text text-accent-3">Link to Your Photo (Required)</label>
        				</div>
							</div>

							<!-- Question dropdowns -->
							<!-- Each question/answer set in its OWN ROW and COLUMN -->
							<div class="row">
								<div class="input-field col s12">
									<h6>Question 1: What was your dream job growing up?</h6>
							    <select class="lime-text text-accent-2" id="q1">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Celebrity chef</option>
							      <option value="2">Doctor</option>
							      <option value="3">News anchor</option>
							      <option value="4">Wet blanket</option>
							      <option value="5">Astrophysicist</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 2: What food could you live on forever?</h6>
							    <select class="lime-text text-accent-2" id="q2">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Seafood</option>
							      <option value="2">Soylent green</option>
							      <option value="3">Soft foods</option>
							      <option value="4">Anything really</option>
							      <option value="5">Forget food, I love alcohol!</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 3: Where is your favorite vacation spot?</h6>
							    <select class="lime-text text-accent-2" id="q3">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Tijuana</option>
							      <option value="2">Amphibios 9</option>
							      <option value="3">Decapod 10</option>
							      <option value="4">Doohan 6</option>
							      <option value="5">Eternium</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 4: What is your best feature?</h6>
							    <select class="lime-text text-accent-2" id="q4">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Cuteness</option>
							      <option value="2">Shiny metal ass</option>
							      <option value="3">Smooth skin</option>
							      <option value="4">Hair</option>
							      <option value="5">Giant head</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 5: On a Friday night, what are you most likely doing?</h6>
							    <select class="lime-text text-accent-2" id="q5">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Interviewing puny humans</option>
							      <option value="2">Taking a nap</option>
							      <option value="3">Looking at memes online</option>
							      <option value="4">Drinking</option>
							      <option value="5">Singing karaoke</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 6: How do you solve problems?</h6>
							    <select class="lime-text text-accent-2" id="q6">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">With violence</option>
							      <option value="2">With drinking</option>
							      <option value="3">With crying</option>
							      <option value="4">With knowledge</option>
							      <option value="5">With surgery</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 7: What is your favorite movie?</h6>
							    <select class="lime-text text-accent-2" id="q7">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Mars Attacks</option>
							      <option value="2">Terminator 2</option>
							      <option value="3">20,000 Leagues Under the Sea</option>
							      <option value="4">Baby Geniuses</option>
							      <option value="5">Milo &amp; Otis</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 8: Which Simpsons character would you hang out with?</h6>
							    <select class="lime-text text-accent-2" id="q8">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Otto</option>
							      <option value="2">Montgomery Burns</option>
							      <option value="3">Waylon Smithers</option>
							      <option value="4">Dr. Nick Riviera</option>
							      <option value="5">Santa&apos;s Little Helper</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 9: Pick a pet.</h6>
							    <select class="lime-text text-accent-2" id="q9">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">A puppy</option>
							      <option value="2">A guinea pig</option>
							      <option value="3">Pazuzu</option>
							      <option value="4">A human</option>
							      <option value="5">A slinky</option>
							    </select>
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 10: What is your favorite kind of music?</h6>
							    <select class="lime-text text-accent-2" id="q10">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Showtunes</option>
							      <option value="2">Whale songs</option>
							      <option value="3">Death metal</option>
							      <option value="4">Moog synth</option>
							      <option value="5">Audio books</option>
							    </select>
							  </div>
							</div>
							<!-- Ends question dropdowns -->

							<div class="row">
								<div class="col s12">
									<!-- Submit button -->
									<!-- For modal: added 'modal-trigger' to button class AND data-target of modal id -->
									<button class="btn waves-effect waves-light green accent-3 z-depth-4 modal-trigger" type="submit" name="action" id="submit" data-target="modal1">Best friend time!
    							<i class="material-icons right">face</i>
  								</button>
									
									<!-- Home button -->
									<a class="waves-effect waves-light btn light-blue accent-3 z-depth-4 z-depth-4" href="/"><i class="medium material-icons">home</i></a>
								</div>
							</div>
						</div> <!-- Column div the whole form is in -->
					</div> <!-- Row div the whole form is in -->

					</div> <!-- Closes form div -->
				</div> <!-- Closes section div -->
				
					<!-- Modal here -->
					<div class="modal" id="modal1">
						<div class="modal-content center-align">
							<h2>Good news!</h2>
							<h3>Your new best friend is:</h3>
							<h4 id="match-name"></h4>
							<img id="match-img" src="" alt="" width="50%">
						</div>
					</div>

			</div> <!-- Closes page column -->
		</div> <!-- Closes page row -->
	</div> <!-- Closes page container -->

	<!-- Simple footer -->
	<footer class="footer">
    <div class="container">
    	<div class="row">
    		<div class="col s12">
      	<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/g33klaura/FriendFinder">GitHub Repo</a></p>
      	</div>
      </div>
    </div>
  </footer>


	<!-- ==================== SCRIPT TAGS ==================== -->
	<!-- Link to jQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!-- Materialize compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

	<script type="text/javascript">
		
		$(document).ready(function() {

			// Initialize Materialize modals
			$('.modal').modal();

			// Initialize Materialize drop-down menus
    	$('select').material_select();
  	
  		// Trying to change color of dropdown options
    	// $('.dropdown-content>li>a').css('color', 'lime');

  		// Use in clearing form on submit click
    	var select = $('select');

			// ============================================================
			// Survey submit button
			$('#submit').on('click', function(event) {
				
				// Prevent page from refreshing
				event.preventDefault;

				// console.log('Submit clicked');

				// Grabs form elements and sets to new object
				let userData = {
      		name: $('#name').val().trim(),
      		photo: $('#photo').val().trim(),
      		scores: [
      		parseInt($('#q1').val()),
      		parseInt($('#q2').val()),
      		parseInt($('#q3').val()),
      		parseInt($('#q4').val()),
      		parseInt($('#q5').val()),
      		parseInt($('#q6').val()),
      		parseInt($('#q7').val()),
      		parseInt($('#q8').val()),
      		parseInt($('#q9').val()),
      		parseInt($('#q10').val()) 
      		]
      	};

      	// console.log('New friend object from user survey:');
				// console.log(userData);
				
				// AJAX post the data to the friends API.
        $.post('/api/friends', userData, function(data) {

					// console.log(data);

					// Grab the result from the AJAX post so that the best match's name and photo are displayed.
					$('#match-name').text(data.name);
					$('#match-img').attr({
						'src': data.photo,
						'alt': data.name
					});

				});

				// ===========================================================
      	// Clear survey inputs & reset drop-downs
	      	$('input').val('');
	      	select.prop('selectedIndex', 0);
					select.material_select();
					
			}); //Closes on-click

		}); //Closes document on-ready

	</script>

</body>
</html>