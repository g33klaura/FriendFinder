<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FriendFinder Survey</title>
    
	<!-- Google Fonts -->

	<!-- Materialize Glyphs Stylesheet -->
	<link  rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

	<!-- Materialize Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

	<style type="text/css">
		html {
			background: url('https://vignette.wikia.nocookie.net/en.futurama/images/4/4c/FUTURAMA-BACKGROUND-small.jpg/revision/latest?cb=20160812075819') no-repeat center center fixed;
			-webkit-background-size: cover;
  		-moz-background-size: cover;
  		-o-background-size: cover;
  		background-size: cover;
		}
		h1 {
			font-weight: 600;
		}
		h5, h6 {
			color: white;
		}
		/*footer {
			float: right;
		}*/
	</style>

</head>
<body>

	<!-- This page will hold survey elements then POST user inputs -->

	<div class="container">
		<div class="row">
			<div class="col s12">

				<h1 class="center-align red-text text-darken-1">Survey Questions</h1>
			
				<div class="divider"></div>
				<div class="section">
					<h5>About You</h5>

					<!-- Form with questions -->
					<div class="form">
					
					<div class="row">
						<div class="col s12"> <!-- This column div needs to hold the ENTIRE form -->
							
							<!-- Name and picture inputs -->
							<div class="row">
								<div class="input-field col s6">
          				<input placeholder="" id="name" type="text" class="validate lime-text text-accent-2">
          				<label for="name" class="green-text text-accent-3">Your Name (Required)</label>
        				</div>
        				<div class="input-field col s6">
          				<input placeholder="" id="photo" type="text" class="validate lime-text text-accent-2">
          				<label for="photo" class="green-text text-accent-3">Link to Your Photo (Required)</label>
        				</div>
							</div>

							<!-- Question dropdowns -->
							<!-- Each question/answer set in its OWN ROW and COLUMN -->
							<div class="row">
								<div class="input-field col s12">
									<h6>Question 1: What was your dream job growing up?</h6>
							    <select class="lime-text text-accent-2" id="q1">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Celebrity chef</option>
							      <option value="2">Doctor</option>
							      <option value="3">News anchor</option>
							      <option value="4">Wet blanket</option>
							      <option value="5">Astrophysicist</option>
							    </select>
							    <!-- <label>Question 1</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 2: What food could you live on forever?</h6>
							    <select class="lime-text text-accent-2" id="q2">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Seafood</option>
							      <option value="2">Soylent green</option>
							      <option value="3">Soft foods</option>
							      <option value="4">Anything really</option>
							      <option value="5">Forget food, I love alcohol!</option>
							    </select>
							    <!-- <label>Question 2</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 3: Where is your favorite vacation spot?</h6>
							    <select class="lime-text text-accent-2" id="q3">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Tijuana</option>
							      <option value="2">Amphibios 9</option>
							      <option value="3">Decapod 10</option>
							      <option value="4">Doohan 6</option>
							      <option value="5">Eternium</option>
							    </select>
							    <!-- <label>Question 3</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 4: What is your best feature?</h6>
							    <select class="lime-text text-accent-2" id="q4">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Cuteness</option>
							      <option value="2">Shiny metal ass</option>
							      <option value="3">Smooth skin</option>
							      <option value="4">Hair</option>
							      <option value="5">Giant head</option>
							    </select>
							    <!-- <label>Question 4</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 5: On a Friday night, what are you most likely doing?</h6>
							    <select class="lime-text text-accent-2" id="q5">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Interviewing puny humans</option>
							      <option value="2">Taking a nap</option>
							      <option value="3">Looking at memes online</option>
							      <option value="4">Drinking</option>
							      <option value="5">Singing karaoke</option>
							    </select>
							    <!-- <label>Question 5</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 6: How do you solve problems?</h6>
							    <select class="lime-text text-accent-2" id="q6">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">With violence</option>
							      <option value="2">With drinking</option>
							      <option value="3">With crying</option>
							      <option value="4">With knowledge</option>
							      <option value="5">With surgery</option>
							    </select>
							    <!-- <label>Question 6</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 7: What is your favorite movie?</h6>
							    <select class="lime-text text-accent-2" id="q7">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Mars Attacks</option>
							      <option value="2">Terminator 2</option>
							      <option value="3">20,000 Leagues Under the Sea</option>
							      <option value="4">Baby Geniuses</option>
							      <option value="5">Milo &amp; Otis</option>
							    </select>
							    <!-- <label>Question 7</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 8: Which Simpsons character would you hang out with?</h6>
							    <select class="lime-text text-accent-2" id="q8">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Otto</option>
							      <option value="2">Montgomery Burns</option>
							      <option value="3">Waylon Smithers</option>
							      <option value="4">Dr. Nick Riviera</option>
							      <option value="5">Santa&apos;s Little Helper</option>
							    </select>
							    <!-- <label>Question 8</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 9: Pick a pet.</h6>
							    <select class="lime-text text-accent-2" id="q9">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">A puppy</option>
							      <option value="2">A guinea pig</option>
							      <option value="3">Pazuzu</option>
							      <option value="4">A human</option>
							      <option value="5">A slinky</option>
							    </select>
							    <!-- <label>Question 9</label> -->
							  </div>
							</div>

							<div class="row">
								<div class="input-field col s12">
									<h6>Question 10: What is your favorite kind of music?</h6>
							    <select class="lime-text text-accent-2" id="q10">
							      <option value="" disabled selected>Select one</option>
							      <option value="1">Showtunes</option>
							      <option value="2">Whale songs</option>
							      <option value="3">Death metal</option>
							      <option value="4">Moog synth</option>
							      <option value="5">Audio books</option>
							    </select>
							    <!-- <label>Question 10</label> -->
							  </div>
							</div>
							<!-- Ends question dropdowns -->

							<div class="row">
								<div class="col s12">
									<!-- Submit button -->
									<!-- For MODAL : added 'modal-trigger' to submit button class -->
									<button class="btn waves-effect waves-light green accent-3 z-depth-4 modal-trigger" type="submit" name="action" id="submit">Best friend time!
    							<i class="material-icons right">face</i>
  								</button>
									
									<!-- Home button -->
									<a class="waves-effect waves-light btn light-blue accent-3 z-depth-4 z-depth-4" href="/"><i class="medium material-icons">home</i></a>
								</div>
							</div>
						</div> <!-- Column div the whole form is in -->
					</div> <!-- Row div the whole form is in -->

					</div> <!-- Closes form div -->
				</div> <!-- Closes section div -->
				
			</div> <!-- Closes page column -->
		</div> <!-- Closes page row -->
	</div> <!-- Closes page container -->


	<!-- Simple footer -->
	<footer class="footer">
    <div class="container">
    	<div class="row">
    		<div class="col s12">
      	<p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/g33klaura/FriendFinder">GitHub Repo</a></p>
      	</div>
      </div>
    </div>
  </footer>

	<!-- Modal here -->
	<!-- modal code from NewsNow project ~ get triggering then edit -->
	<div id="modal-saved" class="modal" href="#modal-saved" data-target="#modal-saved">
    <div class="modal-content center-align">
      <h4>I AM MODAL</h4>
      <!-- <p>Article saved</p> -->
    </div>
  </div>

	<!-- ========== SCRIPT TAGS ========== -->
	<!-- Link to jQuery -->
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

	<!-- Materialize compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

	<!-- My JavaScript -->
	<!-- <script type="text/javascript" src="assets/javascript/app.js"></script> -->

	<script type="text/javascript">
		
		$(document).ready(function() {

			// Initialize Materialize drop-down menus
    	$('select').material_select();
  	
  		// Trying to change color of dropdown options
    	// $('.dropdown-content>li>a').css('color', 'lime');

  		// Use in clearing form on submit click
    	var select = $('select');

    	// Survey submit button ==========================
    	// ===============================================
			$('#submit').on('click', function(event) {
				
				// Prevent page from refreshing
				event.preventDefault;

				// console.log('Submit clicked');
				
				$('.modal').modal();

				// Grabs form elements and sets to new object
				let userData = {
      		name: $('#name').val().trim(),
      		photo: $('#photo').val().trim(),
      		scores: [
      		parseInt($('#q1').val()),
      		parseInt($('#q2').val()),
      		parseInt($('#q3').val()),
      		parseInt($('#q4').val()),
      		parseInt($('#q5').val()),
      		parseInt($('#q6').val()),
      		parseInt($('#q7').val()),
      		parseInt($('#q8').val()),
      		parseInt($('#q9').val()),
      		parseInt($('#q10').val()) 
      		]
      	};

      	console.log('New friend object from user survey:');
				console.log(userData);
				
				// AJAX post the data to the friends API.
        $.post("/api/friends", userData, function(data) {

					console.log(data);

					// Grab the result from the AJAX post so that the best match's name and photo are displayed.
					// $("#match-name").text(data.name);
					// $("#match-img").attr("src", data.photo);

					// Show the modal with the best match
					// $("#results-modal").modal("toggle");
					$('.modal-trigger#modal-saved').modal();

				});
// } else {
// alert("Please fill out all fields before submitting!");
// }


				/*
      	// 2nd attempt
      	// POST Request as grabbed by jQuery ==========================
      	$.post('/api/friends', newFriendSurvey);

      	// from tables.html example in 16-HotRestaurant
      	runFriendQuery();

      	function runFriendQuery() {
      		let currentURL = window.location.origin;

      		$.ajax({ url: currentURL + '/api/friends', method: 'GET' })
      		.done(function(friendsData) {
      			console.log('------------------------------------');
        		console.log("URL: " + currentURL + "/api/friends");
        		console.log('------------------------------------');
        		console.log('Hey Patrick or Ronny! Sooo, the totalDifference numbers will show up in command-line. I\'m still working out selecting the lowest number to make the match. But you should be able to see the Futurama friend name and the total difference btwn the user\'s scores below the name. Thaaaanks! :)');

        		// console.log(friendsData);
      		});
      	}  //Closes runFriendQuery
				*/

      	// Clear Survey ===============================================
	      	$('input').val('');

	      	select.prop('selectedIndex', 0);
	      	select.material_select();
			}); //Closes on-click

			// select.material_select();
			// ^^Still clears w/o this on... don't get $.post alerts


			// Modal initialization 
			// ********Not sure if this'll go in the on-click of submit********
			// the "href" attribute of the modal trigger must specify the modal ID that wants to be triggered
			// $('.modal').modal();
			// $('.modal-trigger#modal-saved').modal();

		}); //Closes document on-ready

	</script>

</body>
</html>